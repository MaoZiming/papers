# Address Space

- Address space for a process
  - Contains
    - Code
      - the instructions
    - Stack
      - Grows due to function calls, etc.
      - The program, while it is running, uses a stack to keep track of where it is in the function call chain as well as to allocate local variables and pass parameters and return values to and from routines.
    - Heap
      - heap is used for dynamically-allocated, user-managed memory
  - Why placing the stack and heap like this?
    - Each wishes to grow
    - ![alt text](https://file+.vscode-resource.vscode-cdn.net/Users/maoziming/Library/Mobile%20Documents/com~apple~CloudDocs/Berkeley/Summer%202024/Prelim/Topics/0%20-%20Virtualization/images/program_address_space.png)
  - The heap thus starts just after the code (at 1KB) and grows downward (say when a ser requests more memory via malloc()); the stack starts at 16KB and grows upward (say when a user makes a procedure call).
- Goals:
  - Address space: an easy to use abstraction of physical memory.
  - The address space of a process contains all of the memory state of the running program.
  - Transparency
    - Should behave as if it has its own private physical memory
    - OS does multiplexing among different jobs
    - ![alt text](https://file+.vscode-resource.vscode-cdn.net/Users/maoziming/Library/Mobile%20Documents/com~apple~CloudDocs/Berkeley/Summer%202024/Prelim/Topics/0%20-%20Virtualization/images/sharing_memory.png)
